(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{492:function(s,t,n){"use strict";n.r(t);var a=n(4),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"表达式求值-vs-变量声明提升"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#表达式求值-vs-变量声明提升"}},[s._v("#")]),s._v(" 表达式求值 Vs 变量声明提升")]),s._v(" "),n("p",[s._v("Halo，一个美梦，被一个温柔闹钟铃声所打破，我很不情愿地掀开暖暖的狗窝，拿起手机，开启日常的第一阶段：信息浏览。")]),s._v(" "),n("p",[s._v("正当我准备浏览结束，要去洗漱 -> 吃早餐 -> 上课时，在某某某交流群看到一位群友发起问题讨论时，我朦胧的双眼瞬间两眼放光，整个人就精神了起来，并加入其激烈的讨论当中。")]),s._v(" "),n("p",[s._v("话题复原：")]),s._v(" "),n("p",[s._v("一位群友在一个"),n("a",{attrs:{href:"http://perfectionkills.com/javascript-quiz/",target:"_blank",rel:"noopener noreferrer"}},[s._v("网站"),n("OutboundLink")],1),s._v("（不知道需不需要梯子）上做了十几道题，这些题都比较稀奇古怪，也很迷人眼（稍不注意就会看错），其他群友也纷纷参与做题。")]),s._v(" "),n("p",[s._v("我也尝试做了一哈，做错了很多：")]),s._v(" "),n("center",[n("p",[n("img",{attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/468d98249a0a4e1e83485f9867ed0321~tplv-k3u1fbpfcp-watermark.image",alt:"做错的题"}})])]),s._v(" "),n("p",[s._v("最后开始了对错题的讨论，其中最为激烈的是下面这题（对应网站中的第 9 题）：")]),s._v(" "),n("center",[n("p",[n("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d43b734634a5404e81bad5cdc5c3029c~tplv-k3u1fbpfcp-watermark.image",alt:"加入"}})])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" x "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("f")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  x "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("typeof")]),s._v(" f\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("问 x 的结果是（有以下答案，正确答案是第三个"),n("code",[s._v('"1undefined"')]),s._v("）：")]),s._v(" "),n("ul",[n("li",[s._v("1")]),s._v(" "),n("li",[s._v('"1function"')]),s._v(" "),n("li",[s._v('"1undefined"')]),s._v(" "),n("li",[s._v("NaN")])]),s._v(" "),n("h2",{attrs:{id:"激烈的讨论"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#激烈的讨论"}},[s._v("#")]),s._v(" 激烈的讨论")]),s._v(" "),n("p",[s._v("群友 A：函数声明不是会提前吗？答案应该是"),n("code",[s._v('"1function"')]),s._v("才对")]),s._v(" "),n("hr"),s._v(" "),n("p",[s._v("群友 B："),n("code",[s._v("if")]),s._v("里的"),n("code",[s._v("condition")]),s._v("判断条件"),n("code",[s._v("function f() {}")]),s._v("会被转换为布尔值，所以转换为"),n("code",[s._v("true")]),s._v("从而进入"),n("code",[s._v("if")]),s._v("代码块，但"),n("code",[s._v("typeof f")]),s._v("为什么是"),n("code",[s._v("undefined")]),s._v("？")]),s._v(" "),n("hr"),s._v(" "),n("p",[s._v("群友 C：（在浏览器测试了一下，发了个图，结果是"),n("code",[s._v('"1function"')]),s._v("）")]),s._v(" "),n("hr"),s._v(" "),n("p",[s._v("我的见解：对于 if 块的函数声明，会被当做表达式，然后提升到当前作用域顶部（在这里就是全局作用域），也就是说：")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("function f() {}")]),s._v(" 被声明提前了，变成了如下结果：")])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" x "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" f\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("f")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  x "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("typeof")]),s._v(" f\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("ul",[n("li",[s._v("由于变量"),n("code",[s._v("f")]),s._v("被赋值为一个匿名函数，函数转换成布尔值为"),n("code",[s._v("true")])]),s._v(" "),n("li",[s._v("于是进入了"),n("code",[s._v("if")]),s._v("代码块，此时"),n("code",[s._v("typeof f")]),s._v("的结果就是"),n("code",[s._v("function")])]),s._v(" "),n("li",[s._v("所以"),n("code",[s._v("x += typeof f")]),s._v("后，"),n("code",[s._v("x")]),s._v("的结果应该就是"),n("code",[s._v('"1function"')])]),s._v(" "),n("li",[s._v("所以我也认为最后的答案应该是"),n("code",[s._v('"1function"')])])]),s._v(" "),n("hr"),s._v(" "),n("p",[s._v("就在我们一致认为是网站作者弄错了答案之后（群友们纷纷拔起了剑，看看谁拔的剑快，谁就先能干掉作者 ......）")]),s._v(" "),n("hr"),s._v(" "),n("p",[s._v("群友 D：（他也在浏览器测试了一下，发了个图，结果是"),n("code",[s._v('"1undefined"')]),s._v("，然后默默的转身离开 ......）")]),s._v(" "),n("hr"),s._v(" "),n("p",[s._v("？？？这是神马情况，这难道跟浏览器的实现有关嘛？")]),s._v(" "),n("p",[s._v("于是大伙纷纷用各大浏览器测试了结果（可能大伙都在忙，只是根据自己的理解说出自己的想法，一开始并没有人去进行测试，我当时也还躺在床上，用手机打字哈哈哈），咦，居然发现都是"),n("code",[s._v('"1undefined"')])]),s._v(" "),n("p",[s._v("大家也开始对"),n("code",[s._v("群友 C")]),s._v("提出质疑：你是不是之前就声明过"),n("code",[s._v("f")]),s._v("函数，导致当前作用域内本来就有一个"),n("code",[s._v("f")]),s._v("函数")]),s._v(" "),n("p",[n("code",[s._v("群友 C")]),s._v("说：好像是")]),s._v(" "),n("p",[s._v("破案了，于是群友们的剑纷纷指向了"),n("code",[s._v("群友 B")]),s._v("（快逃~）")]),s._v(" "),n("hr"),s._v(" "),n("p",[s._v("之后的大家也进行了很多测试，进行了很多的讨论，交流各自的想法，但无非也还是围绕上面几个群友们的看法来讨论：")]),s._v(" "),n("ul",[n("li",[s._v("变量声明提前")]),s._v(" "),n("li",[s._v("匿名函数表达式")]),s._v(" "),n("li",[s._v("......")])]),s._v(" "),n("hr"),s._v(" "),n("p",[s._v("直到有位群友（也就是分享做题网站的那位）发了一个截图：")]),s._v(" "),n("center",[n("p",[n("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ae916794160c4a01ade5ba95a3c30a6b~tplv-k3u1fbpfcp-watermark.image",alt:"表达式求值"}})])]),s._v(" "),n("p",[s._v("此时我爬起了床，打开电脑测试的同时也发表着见解：")]),s._v(" "),n("ul",[n("li",[s._v("因为这里是一个表达式")]),s._v(" "),n("li",[s._v("表达式最终产生一个值")]),s._v(" "),n("li",[s._v("但是却没有变量接收这个值")]),s._v(" "),n("li",[s._v("在执行完当前表达式后，这个值也随之销毁")]),s._v(" "),n("li",[s._v("所以在后续的读取操作中会发现因为未定义而报错")])]),s._v(" "),n("hr"),s._v(" "),n("p",[s._v("到这里，这个问题也就迎刃而解，原来我们一直在绕圈圈，虽然大家说的都有道理，但总感觉哪里说不同，说服力不够，主要是被函数声明提前给限制死了，没有散发思维，没有思考这个问题的本质：也就是"),n("code",[s._v("if")]),s._v("的条件判断"),n("code",[s._v("condition")]),s._v("他其实是一个表达式。")]),s._v(" "),n("hr"),s._v(" "),n("h2",{attrs:{id:"表达式求值而不是变量提升"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#表达式求值而不是变量提升"}},[s._v("#")]),s._v(" 表达式求值而不是变量提升")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" x "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("f")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  x "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("typeof")]),s._v(" f\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'If 里的 x：'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" x"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// If 里的 x： 1undefined")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('// console.log("If 里的 f：", f); // Uncaught ReferenceError: f is not defined')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'If 外的 x：'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" x"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// If 外的 x： 1undefined")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('// console.log("If 外的 f：", f); // Uncaught ReferenceError: f is not defined')]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("p",[s._v("在这块代码中，也就是原题目，只不过我添加了几行"),n("code",[s._v("console")]),s._v("，来辅助说明：")]),s._v(" "),n("ul",[n("li",[s._v("在这里，判断条件"),n("code",[s._v("function f() {}")]),s._v("是一个表达式，求值后就是一个函数")]),s._v(" "),n("li",[s._v("然而这是一个匿名函数表达式，只是将这个匿名函数的"),n("code",[s._v("name")]),s._v("属性设置成了"),n("code",[s._v("f")])])]),s._v(" "),n("center",[n("p",[n("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f27f2fd96a824fc4b2f8cfbdf89eba6d~tplv-k3u1fbpfcp-watermark.image",alt:"name"}})])]),s._v(" "),n("ul",[n("li",[s._v("由于这个表达式的结果是一个函数，在转换成布尔值时，转换后的结果是"),n("code",[s._v("true")]),s._v("，所以能进入"),n("code",[s._v("if")]),s._v("代码块（符合"),n("code",[s._v("群友 B")]),s._v("的看法）")]),s._v(" "),n("li",[s._v("但由于没有变量去接收这个值（或者说引用/使用它），在执行完这个条件后，这个值也就被销毁（应该是被当做垃圾回收或者游离在内存等待被回收了吧）了")]),s._v(" "),n("li",[s._v("所以在"),n("code",[s._v("if")]),s._v("代码块内，"),n("code",[s._v("typeof f")]),s._v("的结果是字符串"),n("code",[s._v('"undefined"')]),s._v("，因为在当前作用域链上根本就没有变量"),n("code",[s._v("f")]),s._v("的存在")]),s._v(" "),n("li",[n("code",[s._v("x")]),s._v("与之拼接后，自然而然的也就是"),n("code",[s._v("1undefined")]),s._v("了")]),s._v(" "),n("li",[s._v("最终的"),n("code",[s._v("console")]),s._v("也打印出了预期的结果，由于"),n("code",[s._v("f")]),s._v("是未定义，所以有关"),n("code",[s._v("f")]),s._v("的访问就注释了，感兴趣的朋友可以复制代码去跑一下")])]),s._v(" "),n("p",[s._v("假若我们用一个变量去接收，那么最终"),n("code",[s._v("x")]),s._v("的值就是一开始所说的"),n("code",[s._v("1function")])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" x "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" f\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("f")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("f")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  x "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("typeof")]),s._v(" f\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1function")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("hr"),s._v(" "),n("p",[s._v("还没完，我们继续挖坑 ......")]),s._v(" "),n("hr"),s._v(" "),n("h2",{attrs:{id:"变量提升而不是匿名函数表达式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#变量提升而不是匿名函数表达式"}},[s._v("#")]),s._v(" 变量提升而不是匿名函数表达式")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" x "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("f"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("f")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  x "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("typeof")]),s._v(" f\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 不打印，因为 f 是 undefined，if 进不来")]),s._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'If 里的 x：'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" x"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'If 里的 f：'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" f"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'If 外的 x：'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" x"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1")]),s._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'If 外的 f：'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" f"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// undefined")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("p",[s._v("在这里，判断条件"),n("code",[s._v("condition")]),s._v("本质上还是一个表达式，我们需要的还是这个表达式的求值结果。\n但它不是前面所说的匿名函数表达式求值，而是一个普通的变量求值：")]),s._v(" "),n("ul",[n("li",[s._v("在"),n("code",[s._v("JavaScript")]),s._v("代码被编译成"),n("code",[s._v("AST")]),s._v("阶段，会进行一系列的初始化，其中就包括"),n("code",[s._v("变量提升")]),s._v("（相关内容都能讲一篇文章，感兴趣的朋友可以查阅资料）")]),s._v(" "),n("li",[n("code",[s._v("if")]),s._v("代码块中的"),n("code",[s._v("f")]),s._v("与"),n("code",[s._v("d")]),s._v("函数声明会被编译器捕获，并提升到作用域顶部")]),s._v(" "),n("li",[s._v("但是，"),n("code",[s._v("if")]),s._v("代码块中的函数声明，虽然会提升变量，但其本身会被当做函数表达式来处理")])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("f"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("f")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("相当于（但也因各大浏览器的实现有关 "),n("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/function",target:"_blank",rel:"noopener noreferrer"}},[s._v("MDN"),n("OutboundLink")],1),s._v("）：")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" f\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("f"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("f")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("f")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("ul",[n("li",[s._v("此时"),n("code",[s._v("f")]),s._v("虽然已经定义，但是其值是"),n("code",[s._v("undefined")]),s._v("，所以进不去"),n("code",[s._v("if")]),s._v("代码块，自然而然里面的代码也就不会执行了。")])]),s._v(" "),n("hr"),s._v(" "),n("h2",{attrs:{id:"广泛使用的-iife"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#广泛使用的-iife"}},[s._v("#")]),s._v(" 广泛使用的 IIFE")]),s._v(" "),n("p",[s._v("到这里，大家不知是否想到了常用的"),n("code",[s._v("立即执行函数")]),s._v("呢？他其实也就是一个匿名函数表达式，只不过在后面再加上一对圆括号"),n("code",[s._v("()")]),s._v("马上执行了而已。")]),s._v(" "),n("p",[s._v("在执行完之后，他就会被"),n("code",[s._v("GC")]),s._v("回收了，但我们可以利用它，做一些好玩的事情 ......")]),s._v(" "),n("hr"),s._v(" "),n("h2",{attrs:{id:"总结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[s._v("#")]),s._v(" 总结")]),s._v(" "),n("p",[s._v("这次激烈的讨论，我从中学习到很多，也能结合以往学到的知识来证明问题，我觉得值得记录。")]),s._v(" "),n("p",[s._v("关于这个问题，就涉及很多基础知识：")]),s._v(" "),n("ul",[n("li",[s._v("变量提升")]),s._v(" "),n("li",[s._v("作用域链")]),s._v(" "),n("li",[s._v("表达式是用来求值的")]),s._v(" "),n("li",[s._v("类型判断与类型转换")]),s._v(" "),n("li",[s._v("函数表达式与函数声明的区别")]),s._v(" "),n("li",[s._v("......")])]),s._v(" "),n("p",[s._v("另外要说的就是：")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("变量提升")]),s._v("发生在"),n("code",[s._v("编译")]),s._v("期间")]),s._v(" "),n("li",[n("code",[s._v("表达式求值")]),s._v("发生在"),n("code",[s._v("运行")]),s._v("期间")]),s._v(" "),n("li",[s._v("所以"),n("code",[s._v("if")]),s._v("的"),n("code",[s._v("condition")]),s._v("判断条件（在上文中的匿名函数表达式"),n("code",[s._v("function f() {}")]),s._v("）在"),n("code",[s._v("编译")]),s._v("期间不会被"),n("code",[s._v("提升")]),s._v("，而是在"),n("code",[s._v("运行")]),s._v("期间执行"),n("code",[s._v("求值")]),s._v("（只不过没有变量去接收这个值而已）")]),s._v(" "),n("li",[s._v("关于第三点我觉得可以通过平常书写的匿名函数表达式来求证：")])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("fn")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("Foo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("fn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Foo")]),s._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Foo"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Uncaught ReferenceError: Foo is not defined")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("参与话题讨论的群友们都很积极，并没有像网上的某些评论："),n("font",{attrs:{color:"red"}},[s._v("这个问题没有意义")]),s._v("、"),n("font",{attrs:{color:"red"}},[s._v("这种问题就是浪费时间")]),s._v("、"),n("font",{attrs:{color:"red"}},[s._v("谁会写这种代码？")])],1),s._v(" "),n("p",[s._v("相反我觉得这很有意义，很有趣很好玩，不仅能追溯本源去揭开那块神秘的面纱，还能扩展你的知识广度，同时还能融合你了解的知识。")]),s._v(" "),n("p",[s._v("你要是有时间可以发表自己的相关看法，没必要泼一头冷水给别人是不是~")]),s._v(" "),n("p",[s._v("不过确实，这种代码玩玩也罢，还是不要用在生产项目上，以免造成不必要的困扰~")]),s._v(" "),n("div",{staticClass:"custom-block warning"},[n("p",{staticClass:"custom-block-title"},[s._v("PS")]),s._v(" "),n("p",[s._v("以上内容结合群友们的讨论以及个人的理解，纯属个人见解，如若有误，敬请指出~")])]),s._v(" "),n("hr"),s._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[s._v("Note")]),s._v(" "),n("p",[s._v("实践才是检验真理的唯一标准！")])]),s._v(" "),n("p",[s._v("（完了逃课好像被老师抓到了 ......")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ca4748e9dfbd4ccfae26e511814db2ca~tplv-k3u1fbpfcp-watermark.image",alt:"聊天记录"}})])],1)}),[],!1,null,null,null);t.default=e.exports}}]);